define(["require","app/standard.deck","app/hand","jquery","backbone","underscore"],function(require){var StandardDeck=require("app/standard.deck"),Hand=require("app/hand"),$=require("jquery"),Backbone=require("backbone"),_=require("underscore");(function($){$.fn.disableSelection=function(){return this.attr("unselectable","on").css("user-select","none").on("selectstart",!1)}})($);var CardView=Backbone.View.extend({tagName:"div",className:"card",template:_.template($("#card-template").html()),initialize:function(){this.model.bind("destroy",this.remove,this),this.render()},render:function(){return this.$el.html(this.template(this.model)).disableSelection().show(),this.$el.css({color:this.model.color(),"z-index":this.model.zIndex()}),this},events:{click:"deal"},deal:function(){this.model.collection.trigger("deal",this.model)}}),DeckView=Backbone.View.extend({el:$("#deck"),initialize:function(){this.model.bind("all",this.render,this),this.model.bind("destroy",console.log,this)},render:function(){return this.$el.empty(),this.model.each(function(card,i){var view=new CardView({model:card});view.$el.css("left",i*3+"px"),this.$el.append(view.$el)},this),this}}),HandView=Backbone.View.extend({el:$("#hand"),initialize:function(){this.model.bind("all",this.render,this),this.model.bind("add",this.render,this)},render:function(){this.$el.empty();var rstart=-20,rend=35,rotate=_.range(rstart,rend,Math.floor((Math.abs(rstart)+Math.abs(rend))/this.model.length)),length=this.model.length,increase=Math.PI/length,counter=0;return this.model.each(function(card,i){var view=new CardView({model:card});view.$el.css("transform"," rotate("+rotate[i]+"deg)"),view.$el.css("left",i*60+"px");var top=-20*Math.sin(counter);counter+=increase,view.$el.css("top",top+"px"),this.$("#hand").append(view.$el)}),this}}),AppView=Backbone.View.extend({events:{"click .card":"deal"},initialize:function(){this.deck=new StandardDeck,this.deckview=new DeckView({model:this.deck}),this.deck.bind("deal",this.deal,this),this.deck.deal(),this.hand=new Hand,this.handview=new HandView({model:this.hand})},render:function(){},deal:function(model){console.log("deal",model),this.deck.remove(model),this.hand.add(model)}});$(document).ready(function(){var App=new AppView}),console.log("Hello world")})